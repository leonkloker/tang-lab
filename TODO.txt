Meeting 02/13/2024:
* - Train ridge model with alpha = 0.1 on only 8 samples and their combinations and evaluate on the remaining eight
* - Subsample roughly 20% of cells of each sample and then train on 80% and test on the left-out test samples
* - Train SVM similar to linear regression model

Meeting 02/20/2024:
* - Include opacity values as features (divide the 5 higher-frequency amplitudes by the lowest frequency amplitude to get 5 additional features)
* - Ablation study for each feature: Remove one feature at a time and get the results of lasso regression model

Meeting 02/27/2024:
* - Subsampling by splitting one sample into a train and test sample and then within each train / test sample
resample arbitrary amount of times and combine with other train / test samples to get augmented dataset
* - Find out which feature have zero lasso-coefficient reliable throughout different train/test splits
* - Get test error progression with larger amount of base datapoints to check if more data could be beneficial
(use first n base populations and split them into test and train, then test on their test parts as well as the remaining
N-n unused base populations)
* - Look into PCA of the feature matrix to identify relevant features
* - Fix ablation plot to include baseline model and only plot for lasso to see the importance (or use log-scale)

Meeting 03/05/2024:
* - Check if frequencies can be removed entirely (SVM close to zero more important than high activation performance)
* - Run pipeline on 203 and Avidin instead of CD63
* - Norm of coefficient vector vs amount of base datapoints in dataset 
* - UMAP or visualization of datapoints for paper purposes

Meeting 03/12/2024:
* - Fix dataloading such that Patient ID and activation is used
* - Rerun pipeline on new data
* - UMAP on 10 important single cell features in 2d or 3d
* - Share the Github

Meeting 03/19/2024:
* - Fix cd203c normalization and bins
* - Try marginal feature pdf as features for simple model
* - Fix confusion matrix plot
* - try subsampling approach: Sample n cells from a sample where n is always fixed and
feed all the single-cell features into a model

Meeting 04/02/2024:
* - cut out test set with size 7 from same date / patient such that no overlap to train/dev set
* - plot pdf performance over amount of sample points / sample range
* - tweak hyperparameters using dev set (cut out certain frequencies completely for example and others)
* - include date of experiment in regression plots (colors of scatter)

Meeting 04/09/2024:
* - cd203_dMFI*
* - optimize for range of sampling as well
* - UMAP for feature visualization of pdf features

Meeting 04/17/2024:
- Calculate validation Pearson correlation coefficient for all 4 biomarkers:

All features (0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16):
    Pearson:                                
            cd63    avidin    cd203c_dMFI*
    linear  
    lasso   
    ridge   
    svr     

    MAE / F1:
            cd63    avidin    cd203c_dMFI*
    linear  
    lasso   
    ridge   
    svr     
    svm     

Best features (0,6,7,8,9,10,11,13,14,16):
    Pearson:                                
            cd63    avidin    cd203c_dMFI*
    linear  .975    .993      .988
    lasso   .981    .990      .987
    ridge   .980    .993      .990
    svr     .985    .941      .990

    MAE / F1:
            cd63    avidin    cd203c_dMFI*
    linear  .0595   .0142     .3450
    lasso   .0531   .0171     .3773
    ridge   .0558   .0150     .3023
    svr     .0494   .0568     .2916
    svm     1.0     .847      1.0

Frequency 2 and 5 removed (0,6,8,9,11,13,14,16):
    Pearson:                                
            cd63    avidin    cd203c_dMFI*
    linear  .981    .993      .989
    lasso   .974    .983      .985
    ridge   .982    .992      .990
    svr     .978    .931      .990

    MAE / F1:
            cd63    avidin    cd203c_dMFI*
    linear  .0566   .0153     .4069
    lasso   .0535   .0210     .4874
    ridge   .0560   .0172     .3964
    svr     .0541   .0501     .3773
    svm     1.0     .849      1.0

- Ablation plot for features (remove single feature) on validation set:
The ablation plot when removing just one of the 17 features doesn't correspond to improved performance when 
multiple features that are deemed unimportant are removed. When combinations of features are removed,
the "old" best feature set still performs better than anything derived from ablation plots.
--> What to do for ablation plots (can't really include plots of all possible combinations of removed features)

- First plot - optimizing for sampling range using 20 equidistant sample points

- Second plot - optimizing for the amount of sampling points

- Start writing methods (connect with Sungu's writeup to fit the style)

(- Build a simple FNN to binary predict the activation of a single cell based on its 17 flow cytometry features
, then optimize the model using the activation rate of the entire population
- Unsupervised using kmeans with 2 clusters initially)

Meeting 04/23/2024:
- Write methods section!
* - Create proper ablation plots for removing one frequency at a time, removing 2 frequencies at a time,
varying the sampling range, varying the sampling points (all with ridge regression and MAE or R),
varying the regularization parameter of ridge regression
* - Create a sample plot of the estimated marginal probability densities and the sampling range and points for
some exemplary IFC features
- Put the plots into the powerpoint presentation
- Ask Chienyi for support / supervision for methods section as well as the powerpoint plots

Meeting 04/30/2024:
- Update labels of plots to Pearson coefficient instead of R
- Use all antiIge stimulated samples as train and validation and allergen as test once ready
- Put plots into PowerPoint and create storyline for them
- Create SVM confusion plot and overall best result table

Meeting 05/07/2024:
* - Update labels of plots to Pearson coefficient instead of R
* - Use all antiIge stimulated samples as train and validation and create all plots in a clean fashion
(save the plotting scripts such that everything is ready once the test data arrives)
* - Larger labels and prettier uniform plots when it comes to colorcoding
* - Dump all the nice figures in the powerpoint (for all biomarkers and potentially all models)
* - Make confusion matrix rows sum up to 1 in order to "hide" bad data distribution
* - Don't use all 41 but only 36 samples 

Meeting 05/14/2024:
* - Rotate frequency values for two frequency plot
* - confusion matrix should sum exactly to 1
- Writing: Problem formulation (inputs outputs), data preprocessing, trainset generation,
explain algos in easy language (nontechnical audience), include figures just as numbers for first outline
- Add new figs to PP and mention which purpose they serve and which order they should be in

- Create one really big train set and save it to disk (16k x 340)
- Run hyperparameter optimization using this train set and 11 samples as validation set

Meeting 05/23/2024:
* - Adjust all 17 feature values for negative control per patient:
For each patient, find negative control samples (i.e. dose = 0), calculate the mean for
each of the 17 features over these samples and then substract it from the patient's positive+
control samples

Meeting 05/30/2024:
* - Fix data control group calculation
- Tried single-cell classification with NN 
- Tried clustering into two clusters for activated and non-activated cell 
- Tried other classifiers such as Naive Bayes, Random Forest, Nearest Centroid on both only 
statistical moment features and features sampled from marginal distribution

Meeting 06/04/2024:
- Autoencoder on cell level and cluster in the latent space, see if cluster ratio somehow correlates
with activation levels
- k-fold cross validation to make results more independent from train / val split 
- Try different number of classes for classification
- Update patient data from Gdrive

